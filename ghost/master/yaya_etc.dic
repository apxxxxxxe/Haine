//******************************************************************************
// YAYA　ゴーストテンプレート
// 種々のイベント辞書
//******************************************************************************

//******************************************************************************
//シェル切り替え
//******************************************************************************

//------------------------------------------------------------------------------
//シェルチェンジ開始
//------------------------------------------------------------------------------

OnShellChanging
{
}

//------------------------------------------------------------------------------
//シェルチェンジ完了
//------------------------------------------------------------------------------
OnShellChanged
{
  "h1111207どうかしら。\e"
}


//******************************************************************************
//インストール関連
//******************************************************************************

//------------------------------------------------------------------------------
//インストール中のメッセージ
//------------------------------------------------------------------------------
OnInstallBegin
{
  "h1111101\1インストール中‥‥\e"
}

//------------------------------------------------------------------------------
//インストール完了メッセージ
//------------------------------------------------------------------------------
OnInstallComplete
{
  _ref0 = SPLIT(reference[0],' with',2)[0] //hogehoge with hemohemo

  "h1111209\1"
  --
  if _ref0 == "shell" {
    "シェル"
  }
  elseif _ref0 == "ghost" {
    "ゴースト"
  }
  elseif _ref0 == "balloon" {
    "バルーン"
  }
  elseif _ref0 == "plugin" {
    "プラグイン"
  }
  --
  "「%(reference[1])」\nインストール完了"
  --
  if basewarenameex == 'SSP' {
    _id = ''
    if _ref0 == "shell" {
      _id = 'shell'
    }
    elseif _ref0 == "ghost" {
      _id = 'ghost'
    }
    elseif _ref0 == "balloon" {
      _id = 'balloon'
    }

    if _id != '' {
      "\n\n切り替えますか？"
      --
      AYATEMPLATE.MenuItem("切り替える","OnAYATEMPLATE.InstallChange",_id,200)
      --
      AYATEMPLATE.MenuItem("切り替えない","Menu_CANCEL")
    }
  }
}

OnAYATEMPLATE.InstallChange
{
  "\![change,%(reference[0]),lastinstalled]"
}

//------------------------------------------------------------------------------
//インストール失敗メッセージ
//------------------------------------------------------------------------------
OnInstallFailure
{
  "h1111109\1インストールに失敗\n%(reference[0])\e"
}

//------------------------------------------------------------------------------
//インストール拒否（他のゴーストのためのアーカイブだった）
//------------------------------------------------------------------------------
OnInstallRefuse
{
  "h1111109渡す相手を間違えているみたいよ。\1%(reference[0])専用のようです"
}


//******************************************************************************
//消滅関連
//******************************************************************************

//------------------------------------------------------------------------------
//消滅指示
//------------------------------------------------------------------------------
OnVanishSelecting
{
  "h1111101\1「もう来れない」\nという言葉が、喉まで出かかっている。"
}

//------------------------------------------------------------------------------
//消滅開始
//------------------------------------------------------------------------------
OnVanishSelected
{
  "(バニッシュ開始)"
}

//------------------------------------------------------------------------------
//消滅中止
//------------------------------------------------------------------------------
OnVanishCancel
{
  "h1111101……？h1121207どうしたの、ユーザ。"
}

//------------------------------------------------------------------------------
//他のゴーストが消滅して自分に切り替わった
//------------------------------------------------------------------------------
OnVanished
{
  "h1121104……別れはいつか来るものだもの、ね。"
}


//******************************************************************************
//メールチェック
//******************************************************************************

//------------------------------------------------------------------------------
//メールチェック開始
//------------------------------------------------------------------------------
OnBIFFBegin
{
  "h1111206ポストを見てくるわね。"
}

//------------------------------------------------------------------------------
//メールチェック成功
//------------------------------------------------------------------------------
OnBIFFComplete
{
  if reference[0] == 0 {
    "h1111209空だったわ。"
  }
  else {
    "h1111201%(username)、\nあなた宛てに%(reference[0])通の手紙が来ていたわ。"
  }
}

//------------------------------------------------------------------------------
//メールチェック失敗
//------------------------------------------------------------------------------
OnBIFFFailure
{
}


//******************************************************************************
//ネットワーク更新
//******************************************************************************

//------------------------------------------------------------------------------
//ネットワーク更新開始
//------------------------------------------------------------------------------
OnUpdateBegin
{
  "h1111101\1更新開始"
}

//------------------------------------------------------------------------------
//ネットワーク更新準備完了
//------------------------------------------------------------------------------
OnUpdateReady
{
}

//------------------------------------------------------------------------------
//ネットワーク更新終了
//------------------------------------------------------------------------------
OnUpdateComplete
{
  if reference[0] == "none" {
    //---- 更新すべきファイルが無かった
    "h1111109\1更新なし"
  }
  else {
    //---- 実際に更新が完了した
    "h1111209\1更新完了"
  }
}

//------------------------------------------------------------------------------
//ネットワーク更新失敗
//------------------------------------------------------------------------------
OnUpdateFailure
{
  //---- 上記以外の理由で失敗した
  "h1111109\1更新失敗:%(reference[0])"
}

//------------------------------------------------------------------------------
//ネットワーク更新 ダウンロード開始
//------------------------------------------------------------------------------
OnUpdate.OnDownloadBegin
{
}

//------------------------------------------------------------------------------
//ネットワーク更新 MD5値照合開始
//------------------------------------------------------------------------------
OnUpdate.OnMD5CompareBegin
{
}

//------------------------------------------------------------------------------
//ネットワーク更新 MD5値一致
//------------------------------------------------------------------------------
OnUpdate.OnMD5CompareComplete
{
}

//------------------------------------------------------------------------------
//ネットワーク更新 MD5値不一致
//------------------------------------------------------------------------------
OnUpdate.OnMD5CompareFailure
{
}

//******************************************************************************
//ヘッドラインセンス
//******************************************************************************

/*
//------------------------------------------------------------------------------
//ヘッドラインセンス開始
//------------------------------------------------------------------------------
OnHeadlinesenseBegin
{
"\0\s[0]%(reference[0])ヘッドライン取得中。\e"
}

//------------------------------------------------------------------------------
//ヘッドライン読み上げ
//------------------------------------------------------------------------------
OnHeadlinesense.OnFind
{
//---- はじめのセリフ
if reference[2] == "First" || reference[2] == "First and Last" {
//---- 最初のページ
"\0\b2\s[0]%(reference[0])のヘッドラインですよっ。"
}
elseif reference[2] == "Next" {
//---- 真ん中あたりのページ
"\0\b2\s[0]%(reference[0])ヘッドライン、続き。"
}
elseif reference[2] == "Last" {
//---- 最後のページ
"\0\b2\s[0]%(reference[0])ヘッドライン、これが最後のページです。"
}
--
//---- ヘッドライン本体
"\n\n%(reference[3])\n\n"
--
//---- 選択肢
if reference[2] == "First" || reference[2] == "Next" {
//---- 次のページがある場合
AYATEMPLATE.MenuItem("次のページ","")
--
AYATEMPLATE.MenuItem("サイトへ",reference[1])
--
AYATEMPLATE.MenuItem("やめ","Menu_HEADLINECANCEL",150)
}
else {
//---- 次のページがない場合
AYATEMPLATE.MenuItem("サイトへ",reference[1])
--
AYATEMPLATE.MenuItem("やめ","Menu_HEADLINECANCEL",150)
}
}

//------------------------------------------------------------------------------
//ヘッドライン更新が無かった
//------------------------------------------------------------------------------
OnHeadlinesenseComplete
{
"h1111109\1更新なし\n%(reference[0])\e"
}

//------------------------------------------------------------------------------
//ヘッドラインセンス失敗
//------------------------------------------------------------------------------
OnHeadlinesenseFailure
{
"\0\s[0]ヘッドラインセンスに失敗しました。\n\n理由："
--
if reference[0] == "can't download" {
"ダウンロード失敗。"
}
elseif reference[0] == "can't analyze" {
"ヘッドライン解析失敗。"
}
else {
"謎。"
}
--
"\e"
}
*/


//******************************************************************************
//ファイル作成関連
//******************************************************************************

//------------------------------------------------------------------------------
//updates2.dau作成開始
//------------------------------------------------------------------------------
OnUpdatedataCreating
{
}

//------------------------------------------------------------------------------
//updates2.dau作成完了
//------------------------------------------------------------------------------
OnUpdatedataCreated
{
}

//------------------------------------------------------------------------------
//NAR作成開始
//------------------------------------------------------------------------------
OnNarCreating
{
}

//------------------------------------------------------------------------------
//NAR作成完了
//------------------------------------------------------------------------------
OnNarCreated
{
}

//******************************************************************************
//時計合わせ
//みか (http://homepage2.nifty.com/ko-ki/) の辞書を参考にしました。感謝＞こーき氏
//******************************************************************************

//------------------------------------------------------------------------------
//時計合わせ開始
//------------------------------------------------------------------------------
OnSNTPBegin
{
}

//------------------------------------------------------------------------------
//時刻取得成功、比較開始
//この関数で 2008/03/25 19:15:05 のように見やすい形に作り変えます。
//詳しくはSTRFORM関数の説明を見てね！
//わからなければこのままで。
//------------------------------------------------------------------------------

SNTPCompare_StrForm
{
  _txt = SPLIT(_argv[0],',')
  STRFORM("$04d/$02d/$02d $02d:$02d:$02d",TOINT(_txt[0]),TOINT(_txt[1]),TOINT(_txt[2]),TOINT(_txt[3]),TOINT(_txt[4]),TOINT(_txt[5]))
}

OnSNTPCompare
{
}

//------------------------------------------------------------------------------
//時計合わせ失敗
//------------------------------------------------------------------------------
OnSNTPFailure
{
}


//******************************************************************************
//そのほか
//******************************************************************************

//------------------------------------------------------------------------------
//ディスプレイ解像度変更
//------------------------------------------------------------------------------
OnDisplayChange
{
  //---- 変数にディスプレイ解像度と色深度に関する情報を取得
  //---- 使うかどうかは分からないがとりあえず保持しておく
  displaybpp    = reference[0]
  displaywidth  = reference[1]
  displayheight = reference[2]
}

//------------------------------------------------------------------------------
//URLドロップ
//CROW でゴーストインストーラからゴーストをインストールを始めた時にも呼ばれます
//------------------------------------------------------------------------------
OnURLDropping
{
}

//------------------------------------------------------------------------------
//起動時に MATERIA を検出
//------------------------------------------------------------------------------
OnEmbryoExist
{
}

//------------------------------------------------------------------------------
//起動時に猫どりふを検出
//------------------------------------------------------------------------------
OnNekodorifExist
{
}

//------------------------------------------------------------------------------
//スクリーンセーバー実行開始
//------------------------------------------------------------------------------
OnScreenSaverStart
{
}

//------------------------------------------------------------------------------
//スクリーンセーバー実行終了
//------------------------------------------------------------------------------
OnScreenSaverEnd
{
}

//------------------------------------------------------------------------------
// バルーンのツールチップ定義
//------------------------------------------------------------------------------

On_balloon_tooltip
{
  if ISFUNC( "BalloonTooltip_%(reference[1])" ) {
    EVAL( "BalloonTooltip_%(reference[1])" )
  }
}

